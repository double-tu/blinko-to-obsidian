# Blinko to obsidian

**English** | [ÁÆÄ‰Ωì‰∏≠Êñá](./README.zh-CN.md)

**Blinko to obsidian** is an Obsidian community plugin that bridges your self-hosted [Blinko](https://github.com/blinko-space/blinko) server with your local Obsidian vault.

It continuously imports your Flash thoughts, Notes, and Todos along with their attachments, rewrites links for offline usage, and optionally embeds your daily flashes into your Obsidian Daily Notes.

## ‚ú® Key Features

- **Incremental Sync**: Only fetches new or updated notes based on `lastSyncTime`, ensuring speed and efficiency.
- **Attachment Handling**: Automatically downloads images and audio referenced in Blinko, organizing them into a local folder and rewriting links to Obsidian syntax (`![[file]]`).
- **Daily Note Integration**: Automatically inserts today's flash notes into a specific section of your Daily Note via template markers.
- **AI Auto-Titling**: Uses OpenAI-compatible APIs to generate concise, descriptive titles for "Flash" notes that usually lack titles.
- **Customizable Templates**: Define exactly how your files are named and organized using variables (e.g., sort by type or date).
- **Deletion Reconciliation**: Detects when notes are deleted or moved to the recycle bin on the server and removes the local copies to keep your vault clean.
- **Rich Metadata**: Saves tags, timestamps, and types into YAML Frontmatter for use with plugins like Dataview.

## ‚ö†Ô∏è Important Warning

> [!DANGER] **One-Way Sync Notice** **This plugin performs a one-way sync (Blinko -> Obsidian).**
>
> Please **DO NOT** manually edit the content of `blinko-*.md` files generated by this plugin inside Obsidian.
>
> - If you modify these files locally, your changes **will be overwritten** the next time the note is updated on the Blinko server.
> - To edit the content, please make changes on the Blinko web/app interface.
> - If you wish to elaborate on a thought, use Obsidian's linking feature to reference the Blinko note in a new, separate file.

## ‚öôÔ∏è Installation & Configuration

### 1. Installation

1. Download `main.js`, `manifest.json`, and `styles.css` from the Releases page.
2. Place them in your vault at `.obsidian/plugins/blinko-sync/`.
3. Enable the plugin in Obsidian Settings.

### 2. Basic Setup

Go to **Settings -> Blinko Sync**:

- **Server Connection**:
  - **Server URL**: Your Blinko instance URL (e.g., `https://my-blinko.com`).
  - **Access Token**: The API Token generated in your Blinko settings.
- **Storage**:
  - **Note folder**: Where to save the notes (e.g., `Blinko/Notes`).
  - **Attachment folder**: Where to save images/audio (e.g., `Blinko/Attachments`).

### 3. Detailed Feature Guide

#### üìÇ File Naming & Path Templates

Customize how files are named and where they are placed.

- **File Name Template**: Default is `{{typeFolder}}/blinko-{{id}}`.
  - This organizes notes into subfolders like `Blinko/Notes/Flash/blinko-123.md`.
- **Available Variables**:
  - `{{id}}`: Note ID (Required for uniqueness).
  - `{{type}}`: Type name (flash, note, todo).
  - `{{typeFolder}}`: Type folder Name (Flash, Note, Todo).
  - `{{title}}`: Note title (or first line of content).
  - `{{aiTitle}}`: The AI-generated title (if enabled).
  - `{{created:YYYY-MM-DD}}`: Creation date with formatting.

#### üìÖ Daily Note Integration

Embed today's thoughts directly into your journal.

1. **Toggle**: Enable "Enable Daily Notes integration".

2. **Locate Files**:

   - **Location**: Your Daily Notes folder (e.g., `Daily`).
   - **Format**: The date format used in filenames (e.g., `YYYY-MM-DD`).

3. **Set Markers**: The plugin searches for specific HTML comments to know where to write. Add these lines to your Daily Note template:

   ```
   <MARKDOWN>
   
   <!-- start of flash-notes -->
   
   <!-- end of flash-notes -->
   ```

   The plugin will overwrite the content between these markers with the latest sync data.

4. **Auto-create missing Daily Notes (optional)**:

   - Install and enable the community plugin **Templater** (`templater-obsidian`) and turn on its **Trigger on new file creation** option. Blinko piggybacks on that hook to apply your folder template exactly as if you had created the file yourself.
   - Enable **Auto-create missing Daily Notes** in Blinko‚Äôs settings. When a sync needs a daily note that does not exist yet, the plugin creates it, triggers Templater, waits for your template to finish (see below), and only then injects the Blinko block.
   - Some template stacks take a moment to render. Use **Template settle delay (ms)** to specify how long Blinko should wait after creating the file before it searches for the markers. Increase the delay if you still see ‚Äústart marker not found‚Äù messages; set it to `0` to skip the wait.
   - If Templater is missing or disabled, the file is still created but remains blank; the plugin logs a warning so you can fix the dependency before the next sync.

#### ü§ñ AI Title Generation (Optional)

Replace generic filenames with descriptive titles.

1. **Toggle**: Enable "Enable AI Title Generation".
2. **API Setup**:
   - **Base URL**: e.g., `https://api.openai.com/v1`.
   - **Model**: e.g., `gpt-4o-mini`.
3. **Result**: When syncing a Flash note without a title, the plugin sends the content to the AI, which generates a short filename summary.

#### üóëÔ∏è Deletion Sync

- **Delete Check**: Periodically checks if local files still exist on the server.
- **Logic**: If a note returns 404 or is not found in the ID list, the plugin deletes the local `.md` file and its unique attachments.
- **Recycle Bin**: You can choose whether to delete notes locally that are currently sitting in the Blinko Recycle Bin.

------

## Usage

1. **Manual Sync**:
   - Click the Blinko icon in the left ribbon.
   - Or use Command Palette (`Ctrl/Cmd + P`) and search `Blinko: Sync now`.
2. **Auto Sync**:
   - Configure the `Auto sync interval` in settings (default: 30 minutes). Set to 0 to disable.
3. **Status**:
   - A notification will appear in the top-right corner summarizing how many new notes were imported.
